<HTML>
<HEAD>
<TITLE>
Term.html
</TITLE>
<LINK REL="STYLESHEET" TYPE="text/css" HREF="D:/hak/hlt/classes/resources/Hilite.Style.css">
</HEAD>
<BODY BGCOLOR="#CCCCFF" TEXT="BLACK">
<CENTER>
<TABLE BGCOLOR=white WIDTH=50% BORDER=5 CELLPADDING=20>
<TR><TD ALIGN=CENTER>
<SPAN STYLE="FONT-SIZE:XX-LARGE"><TT><B>Term.grm</B></TT></SPAN>
<P>
</TD></TR>
</TABLE>
</CENTER>
<PRE>
<SPAN STYLE="COLOR:WHITE"><EM>// FILE. . . . . /home/hak/hlt/src/hlt/language/jaccapps/term/sources/Term.grm
</EM></SPAN><SPAN STYLE="COLOR:WHITE"><EM>// EDIT BY . . . Hassan Ait-Kaci
</EM></SPAN><SPAN STYLE="COLOR:WHITE"><EM>// ON MACHINE. . Hp-Dv7
</EM></SPAN><SPAN STYLE="COLOR:WHITE"><EM>// STARTED ON. . Sun Oct 14 23:53:44 2012
</EM></SPAN>

</PRE>
<HR>
<CENTER>
<TABLE BGCOLOR="WHITE" WIDTH=90% BORDER=1 CELLPADDING=10>
<TR><TD><SPAN STYLE="COLOR:BLACK">

  This example is a Jacc specification of an interactive parser for
  Prolog terms (and thus for Prolog but without the <tt>[H|T]</tt> and
  <tt>[a, b, ...]</tt> notation for lists). Here are the <a
  href="index.html">source files</a>. This illustrates the use of <a
  href="../../../../../../../doc/hlt/jaccdoc/dynamicLR.html">dynamic
  operators</a> and how to specify top-down undo semantic actions. The
  parser repeatedly reads a term from the standard input, prints its
  canonical form - <i>i.e.</i>, <tt>f(t<sub>1</sub>,
  ... ,t<sub>n</sub>)</tt>. All Prolog dynamic operators are
  predefined, but may be redefined at parse time. New dynamic operators
  may also be defined and redefined at parse time as well.
 
  <p>
 
       
<P><TABLE>
<TR><TD VALIGN=TOP><STRONG>Copyright:</STRONG></TD><TD>&nbsp;</TD>
<TD>&copy; <a href="http://www.hassan-ait-kaci.net/">by the author</a>
</TD></tr>
<TR><TD VALIGN=TOP><STRONG>Author:</STRONG></TD><TD>&nbsp;</TD>
<TD><a href="mahlto:hak@acm.org">Hassan A&iuml;t-Kaci</a>
</TD></tr>
<TR><TD VALIGN=TOP><STRONG>Version:</STRONG></TD><TD>&nbsp;</TD>
<TD>Last modified on Tue Jan 29 10:48:35 2013 by hak
</TD></tr>
</TABLE>

</SPAN></TD></TR>
</TABLE>
</CENTER>
<P>
<PRE>


<SPAN STYLE="COLOR:WHITE"><EM>/*
 * Declarations
 */</EM></SPAN>

%<SPAN STYLE="COLOR:RED"><STRONG>import</STRONG></SPAN> java.util.*;
%start <SPAN STYLE="COLOR:#4400DD">Session</SPAN>

%token <SPAN STYLE="COLOR:GREEN">NUMBER</SPAN> <SPAN STYLE="COLOR:GREEN">FUNCTOR</SPAN>

%dynamic <SPAN STYLE="COLOR:#4400DD">Op</SPAN>     <SPAN STYLE="COLOR:WHITE"><EM>// Prolog operator category
</EM></SPAN>%<SPAN STYLE="COLOR:#4400DD">Op</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>':-'</EM></SPAN>   <SPAN STYLE="COLOR:#33AA33">1200</SPAN> xfx
%<SPAN STYLE="COLOR:#4400DD">Op</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>':-'</EM></SPAN>   <SPAN STYLE="COLOR:#33AA33">1200</SPAN> fx
%<SPAN STYLE="COLOR:#4400DD">Op</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>'--&gt;'</EM></SPAN>  <SPAN STYLE="COLOR:#33AA33">1200</SPAN> xfx
%<SPAN STYLE="COLOR:#4400DD">Op</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>';'</EM></SPAN>    <SPAN STYLE="COLOR:#33AA33">1100</SPAN> xfy
%<SPAN STYLE="COLOR:#4400DD">Op</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>','</EM></SPAN>    <SPAN STYLE="COLOR:#33AA33">1000</SPAN> xfy
%<SPAN STYLE="COLOR:#4400DD">Op</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>'='</EM></SPAN>    <SPAN STYLE="COLOR:#33AA33">700</SPAN> xfx
%<SPAN STYLE="COLOR:#4400DD">Op</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>'\\='</EM></SPAN>  <SPAN STYLE="COLOR:#33AA33">700</SPAN> xfx
%<SPAN STYLE="COLOR:#4400DD">Op</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>'=='</EM></SPAN>   <SPAN STYLE="COLOR:#33AA33">700</SPAN> xfx
%<SPAN STYLE="COLOR:#4400DD">Op</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>'\\=='</EM></SPAN> <SPAN STYLE="COLOR:#33AA33">700</SPAN> xfx
%<SPAN STYLE="COLOR:#4400DD">Op</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>'=..'</EM></SPAN>  <SPAN STYLE="COLOR:#33AA33">700</SPAN> xfx
%<SPAN STYLE="COLOR:#4400DD">Op</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>'is'</EM></SPAN>   <SPAN STYLE="COLOR:#33AA33">700</SPAN> xfx
%<SPAN STYLE="COLOR:#4400DD">Op</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>'=:='</EM></SPAN>  <SPAN STYLE="COLOR:#33AA33">700</SPAN> xfx
%<SPAN STYLE="COLOR:#4400DD">Op</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>'=\\='</EM></SPAN> <SPAN STYLE="COLOR:#33AA33">700</SPAN> xfx
%<SPAN STYLE="COLOR:#4400DD">Op</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>'&lt;'</EM></SPAN>    <SPAN STYLE="COLOR:#33AA33">700</SPAN> xfx
%<SPAN STYLE="COLOR:#4400DD">Op</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>'&lt;='</EM></SPAN>   <SPAN STYLE="COLOR:#33AA33">700</SPAN> xfx
%<SPAN STYLE="COLOR:#4400DD">Op</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>'&gt;'</EM></SPAN>    <SPAN STYLE="COLOR:#33AA33">700</SPAN> xfx
%<SPAN STYLE="COLOR:#4400DD">Op</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>'&gt;='</EM></SPAN>   <SPAN STYLE="COLOR:#33AA33">700</SPAN> xfx
%<SPAN STYLE="COLOR:#4400DD">Op</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>'+'</EM></SPAN>    <SPAN STYLE="COLOR:#33AA33">500</SPAN> yfx
%<SPAN STYLE="COLOR:#4400DD">Op</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>'-'</EM></SPAN>    <SPAN STYLE="COLOR:#33AA33">500</SPAN> yfx
%<SPAN STYLE="COLOR:#4400DD">Op</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>'*'</EM></SPAN>    <SPAN STYLE="COLOR:#33AA33">400</SPAN> yfx
%<SPAN STYLE="COLOR:#4400DD">Op</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>'/'</EM></SPAN>    <SPAN STYLE="COLOR:#33AA33">400</SPAN> yfx
%<SPAN STYLE="COLOR:#4400DD">Op</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>'&amp;'</EM></SPAN>    <SPAN STYLE="COLOR:#33AA33">200</SPAN> xfy
%<SPAN STYLE="COLOR:#4400DD">Op</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>'^'</EM></SPAN>    <SPAN STYLE="COLOR:#33AA33">200</SPAN> xfy
%<SPAN STYLE="COLOR:#4400DD">Op</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>'-'</EM></SPAN>    <SPAN STYLE="COLOR:#33AA33">200</SPAN> fy
<SPAN STYLE="COLOR:WHITE"><EM>// we add, with lesser precedence than relational operators's (700):
</EM></SPAN>%<SPAN STYLE="COLOR:#4400DD">Op</SPAN> <SPAN STYLE="COLOR:BROWN"><STRONG>if</STRONG></SPAN>   <SPAN STYLE="COLOR:#33AA33">800</SPAN> fx       <SPAN STYLE="COLOR:WHITE"><EM>// if X                  ==&gt; if(X)
</EM></SPAN>%<SPAN STYLE="COLOR:#4400DD">Op</SPAN> then <SPAN STYLE="COLOR:#33AA33">850</SPAN> xfy      <SPAN STYLE="COLOR:WHITE"><EM>// X then Y              ==&gt; then(X,Y)
</EM></SPAN>%<SPAN STYLE="COLOR:#4400DD">Op</SPAN> <SPAN STYLE="COLOR:BROWN"><STRONG>else</STRONG></SPAN> <SPAN STYLE="COLOR:#33AA33">820</SPAN> xfx      <SPAN STYLE="COLOR:WHITE"><EM>// X else Y              ==&gt; else(X,Y)
</EM></SPAN>         <SPAN STYLE="COLOR:WHITE"><EM>// THEREFORE // if C then T else E    ==&gt; then(if(C),else(T,E))
</EM></SPAN>
         <SPAN STYLE="COLOR:WHITE"><EM>// Note that // if A then B         ==&gt; then(if(A),B).
</EM></SPAN>         <SPAN STYLE="COLOR:WHITE"><EM>// However   // if A then B else if C then D else E.
</EM></SPAN>         <SPAN STYLE="COLOR:WHITE"><EM>// parses as //    ==&gt; then(if(A),then(else(B,if(C)),else(D,E)))
</EM></SPAN>         <SPAN STYLE="COLOR:WHITE"><EM>// instead of//    ==&gt; then(if(A),else(B,then(if(C),else(D,E))))
</EM></SPAN>         <SPAN STYLE="COLOR:WHITE"><EM>// which is  // if A then B else (if C then D else E).
</EM></SPAN>
%<SPAN STYLE="COLOR:GRAY">{</SPAN>
  <SPAN STYLE="COLOR:#4400DD">Stack</SPAN> terms = <SPAN STYLE="COLOR:BROWN"><STRONG>new</STRONG></SPAN> <SPAN STYLE="COLOR:#4400DD">Stack</SPAN><SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
  <SPAN STYLE="COLOR:#4400DD">Term</SPAN> term, temp;
%<SPAN STYLE="COLOR:GRAY">}</SPAN>

%%
<SPAN STYLE="COLOR:WHITE"><EM>/*
 * Production rules
 */</EM></SPAN>

<SPAN STYLE="COLOR:#4400DD">Session</SPAN>
        : <SPAN STYLE="COLOR:#4400DD">Clauses</SPAN> <SPAN STYLE="COLOR:#4400DD">Exit</SPAN>
        | <SPAN STYLE="COLOR:#4400DD">Exit</SPAN>
        ;

<SPAN STYLE="COLOR:#4400DD">Exit</SPAN>
  	: <SPAN STYLE="COLOR:GREEN"><EM>'exit'</EM></SPAN>
        <SPAN STYLE="COLOR:GRAY">{</SPAN>
	  <SPAN STYLE="COLOR:#4400DD">System</SPAN>.out.println<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GREEN"><EM>"*** Bye bye!..."</EM></SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
	  <SPAN STYLE="COLOR:#4400DD">System</SPAN>.exit<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#33AA33">0</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
	<SPAN STYLE="COLOR:GRAY">}</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>'.'</EM></SPAN>
	;

<SPAN STYLE="COLOR:#4400DD">Clauses</SPAN>
        : <SPAN STYLE="COLOR:#4400DD">Clause</SPAN>
        | <SPAN STYLE="COLOR:#4400DD">Clauses</SPAN> <SPAN STYLE="COLOR:#4400DD">Clause</SPAN>
        ;

<SPAN STYLE="COLOR:#4400DD">Clause</SPAN>
        :
        <SPAN STYLE="COLOR:GRAY">{</SPAN> <SPAN STYLE="COLOR:WHITE"><EM>/* Bottom-up reduction semantic action: */</EM></SPAN>
          terms = <SPAN STYLE="COLOR:BROWN"><STRONG>new</STRONG></SPAN> <SPAN STYLE="COLOR:#4400DD">Stack</SPAN><SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
        <SPAN STYLE="COLOR:GRAY">}</SPAN>
          <SPAN STYLE="COLOR:#4400DD">Term</SPAN>
        <SPAN STYLE="COLOR:GRAY">{</SPAN> <SPAN STYLE="COLOR:WHITE"><EM>/* Bottom-up reduction semantic action: */</EM></SPAN>
          term = <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>terms.pop<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;

          <SPAN STYLE="COLOR:WHITE"><EM>// Operator (re)definition:
</EM></SPAN>          <SPAN STYLE="COLOR:BROWN"><STRONG>if</STRONG></SPAN> <SPAN STYLE="COLOR:GRAY">(</SPAN>term.functor != <SPAN STYLE="COLOR:GREEN">null</SPAN> &amp;&amp; term.functor.equals<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GREEN"><EM>"op"</EM></SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>
              &amp;&amp; term.body != <SPAN STYLE="COLOR:GREEN">null</SPAN> &amp;&amp; term.body.size<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN> == <SPAN STYLE="COLOR:#33AA33">3</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>
            <SPAN STYLE="COLOR:GRAY">{</SPAN>
              <SPAN STYLE="COLOR:BROWN"><STRONG>try</STRONG></SPAN>
                <SPAN STYLE="COLOR:GRAY">{</SPAN>
                  <SPAN STYLE="COLOR:#4400DD">Op</SPAN><SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>term.body.get<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#33AA33">2</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>.functor,
                     <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>term.body.get<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#33AA33">1</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>.functor,
                     <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:BLUE"><STRONG>int</STRONG></SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN><SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>term.body.get<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#33AA33">0</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>.number<SPAN STYLE="COLOR:GRAY">)</SPAN>;
                <SPAN STYLE="COLOR:GRAY">}</SPAN>
              <SPAN STYLE="COLOR:BROWN"><STRONG>catch</STRONG></SPAN> <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">Exception</SPAN> e<SPAN STYLE="COLOR:GRAY">)</SPAN>
                <SPAN STYLE="COLOR:GRAY">{</SPAN>
                  <SPAN STYLE="COLOR:#4400DD">System</SPAN>.err.println<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GREEN"><EM>"*** Bad op declaration: "</EM></SPAN>+term<SPAN STYLE="COLOR:GRAY">)</SPAN>;
                <SPAN STYLE="COLOR:GRAY">}</SPAN>
            <SPAN STYLE="COLOR:GRAY">}</SPAN>

          out.println<SPAN STYLE="COLOR:GRAY">(</SPAN>term.toString<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>; <SPAN STYLE="COLOR:WHITE"><EM>// print out the term's canonical form
</EM></SPAN>          cutAll<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;                     <SPAN STYLE="COLOR:WHITE"><EM>// delete all pending token choices
</EM></SPAN>          <SPAN STYLE="COLOR:#4400DD">TermTokenizer</SPAN>.prompt<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
        <SPAN STYLE="COLOR:GRAY">}</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>'.'</EM></SPAN>
        | error
	<SPAN STYLE="COLOR:GRAY">{</SPAN>
	  errorManager<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>.reportErrors<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GREEN">true</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
          <SPAN STYLE="COLOR:#4400DD">TermTokenizer</SPAN>.prompt<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
	<SPAN STYLE="COLOR:GRAY">}</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>'.'</EM></SPAN>
	;

<SPAN STYLE="COLOR:#4400DD">Op</SPAN>      : <SPAN STYLE="COLOR:GREEN">FUNCTOR</SPAN>
        ;

<SPAN STYLE="COLOR:#4400DD">Term</SPAN>
        : <SPAN STYLE="COLOR:GREEN">NUMBER</SPAN>
        <SPAN STYLE="COLOR:GRAY">{</SPAN> <SPAN STYLE="COLOR:WHITE"><EM>/* Bottom-up reduction semantic action: */</EM></SPAN>
          terms.push<SPAN STYLE="COLOR:GRAY">(</SPAN>$1.isInteger<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN> ? <SPAN STYLE="COLOR:BROWN"><STRONG>new</STRONG></SPAN> <SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:BLUE"><STRONG>int</STRONG></SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>$1.nvalue<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>
                                  : <SPAN STYLE="COLOR:BROWN"><STRONG>new</STRONG></SPAN> <SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">(</SPAN>$1.nvalue<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
        <SPAN STYLE="COLOR:GRAY">}</SPAN>
        <SPAN STYLE="COLOR:GRAY">{</SPAN> <SPAN STYLE="COLOR:WHITE"><EM>/* Top-down undo semantic action: */</EM></SPAN>
          terms.pop<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
        <SPAN STYLE="COLOR:GRAY">}</SPAN>
        | <SPAN STYLE="COLOR:#4400DD">Op</SPAN>
        <SPAN STYLE="COLOR:GRAY">{</SPAN> <SPAN STYLE="COLOR:WHITE"><EM>/* Bottom-up reduction semantic action: */</EM></SPAN>
          terms.push<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:BROWN"><STRONG>new</STRONG></SPAN> <SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">(</SPAN>$1.svalue<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
        <SPAN STYLE="COLOR:GRAY">}</SPAN>
        <SPAN STYLE="COLOR:GRAY">{</SPAN> <SPAN STYLE="COLOR:WHITE"><EM>/* Top-down undo semantic action: */</EM></SPAN>
          terms.pop<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
        <SPAN STYLE="COLOR:GRAY">}</SPAN>
        | <SPAN STYLE="COLOR:#4400DD">Op</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>'('</EM></SPAN>
        <SPAN STYLE="COLOR:GRAY">{</SPAN> <SPAN STYLE="COLOR:WHITE"><EM>/* Bottom-up reduction semantic action: */</EM></SPAN>
          terms.push<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:BROWN"><STRONG>new</STRONG></SPAN> <SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">(</SPAN>$1.svalue<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>,<SPAN STYLE="COLOR:BROWN"><STRONG>new</STRONG></SPAN> <SPAN STYLE="COLOR:#4400DD">Vector</SPAN><SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
        <SPAN STYLE="COLOR:GRAY">}</SPAN>
        <SPAN STYLE="COLOR:GRAY">{</SPAN> <SPAN STYLE="COLOR:WHITE"><EM>/* Top-down undo semantic action: */</EM></SPAN>
          terms.pop<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
        <SPAN STYLE="COLOR:GRAY">}</SPAN>
          <SPAN STYLE="COLOR:#4400DD">Body</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>')'</EM></SPAN>
        | <SPAN STYLE="COLOR:GREEN">OP_</SPAN>
        <SPAN STYLE="COLOR:GRAY">{</SPAN> <SPAN STYLE="COLOR:WHITE"><EM>/* Bottom-up reduction semantic action: */</EM></SPAN>
          terms.push<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:BROWN"><STRONG>new</STRONG></SPAN> <SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">(</SPAN>$1.svalue<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>,<SPAN STYLE="COLOR:BROWN"><STRONG>new</STRONG></SPAN> <SPAN STYLE="COLOR:#4400DD">Vector</SPAN><SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
        <SPAN STYLE="COLOR:GRAY">}</SPAN>
        <SPAN STYLE="COLOR:GRAY">{</SPAN> <SPAN STYLE="COLOR:WHITE"><EM>/* Top-down undo semantic action: */</EM></SPAN>
          terms.pop<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
        <SPAN STYLE="COLOR:GRAY">}</SPAN>
          <SPAN STYLE="COLOR:#4400DD">Term</SPAN>
        <SPAN STYLE="COLOR:GRAY">{</SPAN> <SPAN STYLE="COLOR:WHITE"><EM>/* Bottom-up reduction semantic action: */</EM></SPAN>
          term = <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>terms.pop<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
          <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>terms.peek<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>.body.add<SPAN STYLE="COLOR:GRAY">(</SPAN>term<SPAN STYLE="COLOR:GRAY">)</SPAN>;
        <SPAN STYLE="COLOR:GRAY">}</SPAN>
        <SPAN STYLE="COLOR:GRAY">{</SPAN> <SPAN STYLE="COLOR:WHITE"><EM>/* Top-down undo semantic action: */</EM></SPAN>
          temp = <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>terms.peek<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
          term = <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>temp.body.lastElement<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
          temp.body.removeElementAt<SPAN STYLE="COLOR:GRAY">(</SPAN>temp.body.size<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>-<SPAN STYLE="COLOR:#33AA33">1</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
          terms.push<SPAN STYLE="COLOR:GRAY">(</SPAN>term<SPAN STYLE="COLOR:GRAY">)</SPAN>;
        <SPAN STYLE="COLOR:GRAY">}</SPAN>
        | <SPAN STYLE="COLOR:#4400DD">Term</SPAN> _OP_
        <SPAN STYLE="COLOR:GRAY">{</SPAN> <SPAN STYLE="COLOR:WHITE"><EM>/* Bottom-up reduction semantic action: */</EM></SPAN>
          term = <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>terms.pop<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
          terms.push<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:BROWN"><STRONG>new</STRONG></SPAN> <SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">(</SPAN>$2.svalue<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>,<SPAN STYLE="COLOR:BROWN"><STRONG>new</STRONG></SPAN> <SPAN STYLE="COLOR:#4400DD">Vector</SPAN><SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
          <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>terms.peek<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>.body.add<SPAN STYLE="COLOR:GRAY">(</SPAN>term<SPAN STYLE="COLOR:GRAY">)</SPAN>;
        <SPAN STYLE="COLOR:GRAY">}</SPAN>
        <SPAN STYLE="COLOR:GRAY">{</SPAN> <SPAN STYLE="COLOR:WHITE"><EM>/* Top-down undo semantic action: */</EM></SPAN>
          temp = <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>terms.pop<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
          term = <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>temp.body.lastElement<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
          terms.push<SPAN STYLE="COLOR:GRAY">(</SPAN>term<SPAN STYLE="COLOR:GRAY">)</SPAN>;
        <SPAN STYLE="COLOR:GRAY">}</SPAN>
          <SPAN STYLE="COLOR:#4400DD">Term</SPAN>
        <SPAN STYLE="COLOR:GRAY">{</SPAN> <SPAN STYLE="COLOR:WHITE"><EM>/* Bottom-up reduction semantic action: */</EM></SPAN>
          term = <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>terms.pop<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
          <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>terms.peek<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>.body.add<SPAN STYLE="COLOR:GRAY">(</SPAN>term<SPAN STYLE="COLOR:GRAY">)</SPAN>;
        <SPAN STYLE="COLOR:GRAY">}</SPAN>
        <SPAN STYLE="COLOR:GRAY">{</SPAN> <SPAN STYLE="COLOR:WHITE"><EM>/* Top-down undo semantic action: */</EM></SPAN> 
          temp = <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>terms.peek<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
          term = <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>temp.body.lastElement<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
          temp.body.removeElementAt<SPAN STYLE="COLOR:GRAY">(</SPAN>temp.body.size<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>-<SPAN STYLE="COLOR:#33AA33">1</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
          terms.push<SPAN STYLE="COLOR:GRAY">(</SPAN>term<SPAN STYLE="COLOR:GRAY">)</SPAN>;
        <SPAN STYLE="COLOR:GRAY">}</SPAN>
        | <SPAN STYLE="COLOR:#4400DD">Term</SPAN> _OP
        <SPAN STYLE="COLOR:GRAY">{</SPAN> <SPAN STYLE="COLOR:WHITE"><EM>/* Bottom-up reduction semantic action: */</EM></SPAN>
          term = <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>terms.pop<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
          terms.push<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:BROWN"><STRONG>new</STRONG></SPAN> <SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">(</SPAN>$2.svalue<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>,<SPAN STYLE="COLOR:BROWN"><STRONG>new</STRONG></SPAN> <SPAN STYLE="COLOR:#4400DD">Vector</SPAN><SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
          <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>terms.peek<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>.body.add<SPAN STYLE="COLOR:GRAY">(</SPAN>term<SPAN STYLE="COLOR:GRAY">)</SPAN>;
        <SPAN STYLE="COLOR:GRAY">}</SPAN>
        <SPAN STYLE="COLOR:GRAY">{</SPAN> <SPAN STYLE="COLOR:WHITE"><EM>/* Top-down undo semantic action: */</EM></SPAN>
          temp = <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>terms.pop<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
          term = <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>temp.body.lastElement<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
          terms.push<SPAN STYLE="COLOR:GRAY">(</SPAN>term<SPAN STYLE="COLOR:GRAY">)</SPAN>;
        <SPAN STYLE="COLOR:GRAY">}</SPAN>
        | <SPAN STYLE="COLOR:GREEN"><EM>'('</EM></SPAN> <SPAN STYLE="COLOR:#4400DD">Term</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>')'</EM></SPAN>
        ;

<SPAN STYLE="COLOR:#4400DD">Body</SPAN>
        : <SPAN STYLE="COLOR:#4400DD">Term</SPAN>
        <SPAN STYLE="COLOR:GRAY">{</SPAN> <SPAN STYLE="COLOR:WHITE"><EM>/* Bottom-up reduction semantic action: */</EM></SPAN>
          term = <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>terms.pop<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
          <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>terms.peek<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>.body.add<SPAN STYLE="COLOR:GRAY">(</SPAN>term<SPAN STYLE="COLOR:GRAY">)</SPAN>;
        <SPAN STYLE="COLOR:GRAY">}</SPAN>
        <SPAN STYLE="COLOR:GRAY">{</SPAN> <SPAN STYLE="COLOR:WHITE"><EM>/* Top-down undo semantic action: */</EM></SPAN> 
          temp = <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>terms.peek<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
          term = <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>temp.body.lastElement<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
          temp.body.removeElementAt<SPAN STYLE="COLOR:GRAY">(</SPAN>temp.body.size<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>-<SPAN STYLE="COLOR:#33AA33">1</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
          terms.push<SPAN STYLE="COLOR:GRAY">(</SPAN>term<SPAN STYLE="COLOR:GRAY">)</SPAN>;
        <SPAN STYLE="COLOR:GRAY">}</SPAN>
        | <SPAN STYLE="COLOR:#4400DD">Body</SPAN> <SPAN STYLE="COLOR:GREEN"><EM>','</EM></SPAN> <SPAN STYLE="COLOR:#4400DD">Term</SPAN>
        <SPAN STYLE="COLOR:GRAY">{</SPAN> <SPAN STYLE="COLOR:WHITE"><EM>/* Bottom-up reduction semantic action: */</EM></SPAN>
          term = <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>terms.pop<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
          <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>terms.peek<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>.body.add<SPAN STYLE="COLOR:GRAY">(</SPAN>term<SPAN STYLE="COLOR:GRAY">)</SPAN>;
        <SPAN STYLE="COLOR:GRAY">}</SPAN>
        <SPAN STYLE="COLOR:GRAY">{</SPAN> <SPAN STYLE="COLOR:WHITE"><EM>/* Top-down undo semantic action: */</EM></SPAN> 
          temp = <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>terms.peek<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
          term = <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">Term</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>temp.body.lastElement<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
          temp.body.removeElementAt<SPAN STYLE="COLOR:GRAY">(</SPAN>temp.body.size<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>-<SPAN STYLE="COLOR:#33AA33">1</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
          terms.push<SPAN STYLE="COLOR:GRAY">(</SPAN>term<SPAN STYLE="COLOR:GRAY">)</SPAN>;
        <SPAN STYLE="COLOR:GRAY">}</SPAN>
        ;

%%

</PRE>
<HR>
<CENTER>
<TABLE BGCOLOR="WHITE" WIDTH=90% BORDER=1 CELLPADDING=10>
<TR><TD><SPAN STYLE="COLOR:BLACK">

  Ancillary classes
 
</SPAN></TD></TR>
</TABLE>
</CENTER>
<P>
<PRE>


<SPAN STYLE="COLOR:RED"><STRONG>class</STRONG></SPAN> <SPAN STYLE="COLOR:#4400DD">Term</SPAN>
<SPAN STYLE="COLOR:GRAY">{</SPAN>
  <SPAN STYLE="COLOR:#4400DD">String</SPAN> functor = <SPAN STYLE="COLOR:GREEN">null</SPAN>;
  <SPAN STYLE="COLOR:#4400DD">Vector</SPAN> body = <SPAN STYLE="COLOR:GREEN">null</SPAN>;
  <SPAN STYLE="COLOR:BLUE"><STRONG>double</STRONG></SPAN> number = <SPAN STYLE="COLOR:#4400DD">Double</SPAN>.<SPAN STYLE="COLOR:#4400DD">NaN</SPAN>;
  <SPAN STYLE="COLOR:BLUE"><STRONG>boolean</STRONG></SPAN> isInteger = <SPAN STYLE="COLOR:GREEN">false</SPAN>;

  <SPAN STYLE="COLOR:#4400DD">Term</SPAN> <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:BLUE"><STRONG>double</STRONG></SPAN> n<SPAN STYLE="COLOR:GRAY">)</SPAN>
    <SPAN STYLE="COLOR:GRAY">{</SPAN>
      number = n;
    <SPAN STYLE="COLOR:GRAY">}</SPAN>

  <SPAN STYLE="COLOR:#4400DD">Term</SPAN> <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:BLUE"><STRONG>int</STRONG></SPAN> n<SPAN STYLE="COLOR:GRAY">)</SPAN>
    <SPAN STYLE="COLOR:GRAY">{</SPAN>
      number = n;
      isInteger = <SPAN STYLE="COLOR:GREEN">true</SPAN>;
    <SPAN STYLE="COLOR:GRAY">}</SPAN>

  <SPAN STYLE="COLOR:#4400DD">Term</SPAN> <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">String</SPAN> functor<SPAN STYLE="COLOR:GRAY">)</SPAN>
    <SPAN STYLE="COLOR:GRAY">{</SPAN>
      <SPAN STYLE="COLOR:BROWN"><STRONG>this</STRONG></SPAN>.functor = functor;
    <SPAN STYLE="COLOR:GRAY">}</SPAN>

  <SPAN STYLE="COLOR:#4400DD">Term</SPAN> <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:#4400DD">String</SPAN> functor, <SPAN STYLE="COLOR:#4400DD">Vector</SPAN> body<SPAN STYLE="COLOR:GRAY">)</SPAN>
    <SPAN STYLE="COLOR:GRAY">{</SPAN>
      <SPAN STYLE="COLOR:BROWN"><STRONG>this</STRONG></SPAN>.functor = functor;
      <SPAN STYLE="COLOR:BROWN"><STRONG>this</STRONG></SPAN>.body = body;
    <SPAN STYLE="COLOR:GRAY">}</SPAN>

  <SPAN STYLE="COLOR:MAGENTA"><STRONG>public</STRONG></SPAN> <SPAN STYLE="COLOR:MAGENTA"><STRONG>final</STRONG></SPAN> <SPAN STYLE="COLOR:BLUE"><STRONG>boolean</STRONG></SPAN> isNumber <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>
    <SPAN STYLE="COLOR:GRAY">{</SPAN>
      <SPAN STYLE="COLOR:BROWN"><STRONG>return</STRONG></SPAN> !<SPAN STYLE="COLOR:#4400DD">Double</SPAN>.isNaN<SPAN STYLE="COLOR:GRAY">(</SPAN>number<SPAN STYLE="COLOR:GRAY">)</SPAN>;
    <SPAN STYLE="COLOR:GRAY">}</SPAN>

  <SPAN STYLE="COLOR:MAGENTA"><STRONG>public</STRONG></SPAN> <SPAN STYLE="COLOR:MAGENTA"><STRONG>final</STRONG></SPAN> <SPAN STYLE="COLOR:BLUE"><STRONG>boolean</STRONG></SPAN> hasBody <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>
    <SPAN STYLE="COLOR:GRAY">{</SPAN>
      <SPAN STYLE="COLOR:BROWN"><STRONG>return</STRONG></SPAN> <SPAN STYLE="COLOR:GRAY">(</SPAN>body != <SPAN STYLE="COLOR:GREEN">null</SPAN> &amp;&amp; !body.isEmpty<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
    <SPAN STYLE="COLOR:GRAY">}</SPAN>

  <SPAN STYLE="COLOR:MAGENTA"><STRONG>public</STRONG></SPAN> <SPAN STYLE="COLOR:#4400DD">String</SPAN> toString <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>
    <SPAN STYLE="COLOR:GRAY">{</SPAN>
      <SPAN STYLE="COLOR:BROWN"><STRONG>if</STRONG></SPAN> <SPAN STYLE="COLOR:GRAY">(</SPAN>isNumber<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>
        <SPAN STYLE="COLOR:BROWN"><STRONG>return</STRONG></SPAN><SPAN STYLE="COLOR:GRAY">(</SPAN>isInteger ? <SPAN STYLE="COLOR:#4400DD">String</SPAN>.valueOf<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:BLUE"><STRONG>int</STRONG></SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>number<SPAN STYLE="COLOR:GRAY">)</SPAN>
                         : <SPAN STYLE="COLOR:#4400DD">String</SPAN>.valueOf<SPAN STYLE="COLOR:GRAY">(</SPAN>number<SPAN STYLE="COLOR:GRAY">)</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;

      <SPAN STYLE="COLOR:BROWN"><STRONG>if</STRONG></SPAN> <SPAN STYLE="COLOR:GRAY">(</SPAN>!hasBody<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>
        <SPAN STYLE="COLOR:BROWN"><STRONG>return</STRONG></SPAN> functor;
      
      <SPAN STYLE="COLOR:#4400DD">StringBuffer</SPAN> s = <SPAN STYLE="COLOR:BROWN"><STRONG>new</STRONG></SPAN> <SPAN STYLE="COLOR:#4400DD">StringBuffer</SPAN><SPAN STYLE="COLOR:GRAY">(</SPAN>functor<SPAN STYLE="COLOR:GRAY">)</SPAN>;

      s.append<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GREEN"><EM>"("</EM></SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
      <SPAN STYLE="COLOR:BROWN"><STRONG>for</STRONG></SPAN> <SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:BLUE"><STRONG>int</STRONG></SPAN> i=<SPAN STYLE="COLOR:#33AA33">0</SPAN>; i&lt;body.size<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>; i++<SPAN STYLE="COLOR:GRAY">)</SPAN>
        <SPAN STYLE="COLOR:GRAY">{</SPAN>
          s.append<SPAN STYLE="COLOR:GRAY">(</SPAN>body.get<SPAN STYLE="COLOR:GRAY">(</SPAN>i<SPAN STYLE="COLOR:GRAY">)</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
          <SPAN STYLE="COLOR:BROWN"><STRONG>if</STRONG></SPAN> <SPAN STYLE="COLOR:GRAY">(</SPAN>i&lt;body.size<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>-<SPAN STYLE="COLOR:#33AA33">1</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN> s.append<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GREEN"><EM>","</EM></SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
        <SPAN STYLE="COLOR:GRAY">}</SPAN>
      s.append<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GREEN"><EM>")"</EM></SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;

      <SPAN STYLE="COLOR:BROWN"><STRONG>return</STRONG></SPAN> s.toString<SPAN STYLE="COLOR:GRAY">(</SPAN><SPAN STYLE="COLOR:GRAY">)</SPAN>;
    <SPAN STYLE="COLOR:GRAY">}</SPAN>
<SPAN STYLE="COLOR:GRAY">}</SPAN>

</PRE>
<P>
<HR>
<P ALIGN="RIGHT"><SPAN STYLE="COLOR:#F07070"><EM>
This file was generated on Sun Jun 10 19:47:50 CEST 2018 from file <SPAN STYLE="COLOR:BROWN"><KBD>Term.grm</KBD></SPAN><BR>by the <SPAN STYLE="COLOR:BROWN"><KBD>hlt.language.tools.Hilite</KBD></SPAN> Java tool written by <A HREF="mailto:hak@acm.org">Hassan A&iuml;t-Kaci</A></EM></SPAN>
<P>
<HR>
</BODY>
</HTML>